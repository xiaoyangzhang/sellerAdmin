#set($layout="layout/blank.vm")
<html>
    <head>
        #parse("layout/layout-meta.vm")
		<title>选择目的地</title>  
        <meta name="keywords" content=""></meta>
        <meta name="description" content=""></meta>
		#parse("layout/base-link.vm")
        <style>
            .choosecity{padding-top:20px;}
            .choosecity label,.choosecity input,.choosecity span{vertical-align:middle;margin:0;padding:0;outline:none;}
            .choosecity label{font-size:14px;line-height:14px;color:#666;display:inline-block;margin-right:10px;cursor:pointer;}
            .choosecity input.ck{height:14px;margin-bottom:2px;margin-right:5px;cursor:pointer;}
        </style>
    </head>
    <body>
        #foreach($entry in $destMap.entrySet())  
        <div id="$!{entry.key}" class="choosecity">
        	<label>$!{entry.key}:</label>
        	#foreach($dest in $entry.value)  
        	<label><input type="checkbox" class="city ck"   dest-id="$!{dest.id}" dest-code="$!{dest.city.code}" dest-name="$!{dest.city.name}">$!{dest.city.name}</label>
        	#end
        </div>
        #end
        <br><br><br>
		#parse("layout/base-js.vm")
        <script>
            function getSelected() {
                var result = [];
            	$("input:checkbox:checked")
            	$(".ck:checked").each(function(){
            		result.push({
            			id:$(this).attr("dest-id"),
            			name:$(this).attr("dest-name"),
            			code:$(this).attr("dest-code")
            		});
            	});
            	return result;
            }
            $(function(){
            	var selectedDests = parent.getBaseInfo().dests;
            	console.log(selectedDests);
            	$("input:checkbox").each(function(){
            		for(var j=0;j<selectedDests.length;j++) {
            			if($(this).attr("dest-id")==selectedDests[j].id){
            				$(this).attr("checked","checked");
            			}
            		}
            	});
            	
            })
        </script>
    </body>
</html>